package com.jjf.befree.crawler.processor;

import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.JSONObject;
import com.jjf.befree.crawler.Page;
import com.jjf.befree.crawler.ResultItems;
import com.jjf.befree.crawler.Task;
import com.jjf.befree.crawler.processor.entity.Processor;
import com.jjf.befree.crawler.processor.entity.YoutubeVideo;
import com.jjf.befree.crawler.processor.entity.YoutubeVideoQuality;
import com.jjf.befree.crawler.utils.URLEncodeDecode;
import com.jjf.befree.crawler.utils.YoutubeItagToQuality;
import org.apache.log4j.Logger;

import java.util.ArrayList;
import java.util.List;

/**
 * Created by jjf_lenovo on 2017/5/23.
 */
public class YoutubeProcessor implements Processor {

    static Logger log = Logger.getLogger(YoutubeProcessor.class);

    /**
     * 解析该页面展示的其他相关视频且建立task
     * @param page
     * @return
     */
    @Override
    public Task[] getTasks(Page page) {
        //TODO 处理列表 or 人物视频列表 ，返回更多Task
        return new Task[0];
    }

    /**
     * 返回youtube视频信息
     * @param page
     * @return
     */
    @Override
    public ResultItems getResultItems(Page page) {
        YoutubeVideo youtubeVideo = new YoutubeVideo();
        JSONObject videoJson = getVideoJsonFromUrl(page);//视频信息
        youtubeVideo.setUrl(getVideoUrlsFromPage(videoJson)); //不同格式清晰度的视频连接
        videoJson = videoJson.getJSONObject("args");
        youtubeVideo.setVideoId(videoJson.getString("video_id"));
        youtubeVideo.setImage("https://i.ytimg.com/vi/"+youtubeVideo.getVideoId()+"/hqdefault.jpg");//https://i.ytimg.com/vi/FzU-czBuDbo/hqdefault.jpg
        youtubeVideo.setTitle(videoJson.getString("title"));
        youtubeVideo.setAuthor(videoJson.getString("author"));
        youtubeVideo.setLengthSeconds(videoJson.getInteger("length_seconds"));
        youtubeVideo.setViews(videoJson.getInteger("view_count"));
        youtubeVideo.setAvgRating(videoJson.getString("avg_rating"));
        youtubeVideo.setKeywords(videoJson.getString("keywords"));
        return new ResultItems(youtubeVideo);
    }

    /**
     * 从youtube单视频页面中分析出视频信息生成json
     * @param page
     * @return
     * @Example {"args":{"account_playback_token":"QUFFLUhqa0Z6MXg0UnBkZ21tekUyYmptT28xbHZyOXp1QXxBQ3Jtc0ttUmoyOXhOS0tFOTBqc2E2M3NOWEZpZXRBOHNQNmxNMGlXYVZYQUFIbmc4czJZSDhsYmVOU2RuT21SWUdUMjktZWhUQXd4RGwwUU81RUFuVzdkajRCYU1BdThJbFBfVXhQM3o4NDYtbWNmanRqbndUMA==","ad3_module":"1","ad_device":"1","ad_flags":"0","ad_logging_flag":"1","ad_preroll":"1","ad_slots":"0","ad_tag":"https://pubads.g.doubleclick.net/gampad/ads?ad_rule=0&env=vp&gdfp_req=1&iu=/4061/com.ytpwmpu.peopleandblogs&loeid=9446476,9451825,9457141,9469556,9469911&osd=2&output=xml_vast3&pucrd=CgYIABAAGAA&scor=1&scp=av%3D1%26kpeid%3DQe2Y7V-C9bNMAcCJCBvzQQ%26kpid%3D33019762%26kvid%3DFzU-czBuDbo%26mpvid%3DpBe0tDME6xbhofzI%26ssl%3D1%26afv%3D1%26dbp%3DChY2NENWbVZkSDBHTl9zNHhBelIyZkdREAEgASgA%26dc_yt%3D1%26excl_cat%3D33019762%26k2%3D3,36,44,45,145,211,419,557,613,1211%26k5%3D3_36_44_45_145_211_419_557_613_1211%26kga%3D-1%26kgg%3D-1%26kgpt%3D1%26klg%3Dzh-cn%26kmyd%3Dwatch-longform-ad%26ko%3Dp%26kr%3DF%26kvlg%3Dja%26kvz%3D205%26nlfb%3D1%26p13_rm%3D1%26pos%3Dpre%26yt1st%3D1%26yt3pav%3D1%26ytcat%3D22%26ytdevice%3D1%26ytdevicever%3D1.20170522%26ytexp%3D9419451,9422596,9431012,9434289,9439823,9446054,9446476,9451825,9453073,9457115,9457282,9457360,9458998,9460349,9464675,9465353,9465813,9465918,9465926,9466712,9466778,9469360,9472249,9472261,9474358,9474534,9474596,9475727,9476323,9476737,9477064%26yt_ec%3D4%26yt_ec2%3D14%26yt_vrallowed%3D1&sdki=18803DAD&sz=480x361&unviewed_position_start=1&vid=FzU-czBuDbo&vpos=preroll&ytdevice=1&yt_pt=APb3F2_zZrFFVNdvbc0AGP35k_qiJQQb3P-EWGEWPyfe_FrJFDRqSznHsE8JUbgxvQXoKlowfVRqcwpQ9IakTwp63NPE3Nhb82K7wo3UTL0nrhtz_wfZumWMqzeRCfkQrN6cZneheNvm9t70MWrA0UdHFCsA9F3-0idTRI02SSFlXdmH0vGIt2VhnsNMxdl5-CR3m8-n_f36oIIoJ16MeIcBrteQYQoPtw3hNsNhsXjnTuVdfIqGmQokXAxTiQF-OhaEzF9JGrmVghBli2E9y-Mlj-5YPi1SGtaDAmLJNQ","adaptive_fmts":"url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26upn%3Di3fy1jr-RXQ%26clen%3D407659424%26dur%3D1802.100%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D137%26key%3Dyt6%26mime%3Dvideo%252Fmp4%26ipbits%3D0%26signature%3D33D32083578216C5675B45C639F4B3A37978655B.0B4030FF00BA67D4BC9EC22C31B560B47A01BC9A%26lmt%3D1489553402787906%26gir%3Dyes%26expire%3D1495576921%26keepalive%3Dyes%26pl%3D20%26requiressl%3Dyes%26ip%3D112.10.180.197%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26sparams%3Dclen%252Cdur%252Cei%252Cgir%252Cid%252Cip%252Cipbits%252Citag%252Ckeepalive%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&size=1920x1080&quality_label=1080p&fps=30&clen=407659424&projection_type=1&init=0-714&itag=137&bitrate=2283653&lmt=1489553402787906&index=715-4802&xtags=&type=video%2Fmp4%3B+codecs%3D%22avc1.640028%22,url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26upn%3Di3fy1jr-RXQ%26clen%3D292799752%26dur%3D1802.066%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D248%26key%3Dyt6%26mime%3Dvideo%252Fwebm%26ipbits%3D0%26signature%3DBD299CBF6CF10B5DBD9BF4E12BF03A3CC4143A18.2B3C20E6220E724E7485A4416B20AFBB0E9915AD%26lmt%3D1489341607577296%26gir%3Dyes%26expire%3D1495576921%26keepalive%3Dyes%26pl%3D20%26requiressl%3Dyes%26ip%3D112.10.180.197%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26sparams%3Dclen%252Cdur%252Cei%252Cgir%252Cid%252Cip%252Cipbits%252Citag%252Ckeepalive%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&size=1920x1080&quality_label=1080p&fps=30&clen=292799752&projection_type=1&init=0-242&itag=248&bitrate=2309073&lmt=1489341607577296&index=243-6302&xtags=&type=video%2Fwebm%3B+codecs%3D%22vp9%22,url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26upn%3Di3fy1jr-RXQ%26clen%3D197436751%26dur%3D1802.100%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D136%26key%3Dyt6%26mime%3Dvideo%252Fmp4%26ipbits%3D0%26signature%3D0E43283152FEBB915836A0446E9AB1E41DCD47E1.7D299A2C4A709100470DD47FC4D4969C77D27413%26lmt%3D1489558414753959%26gir%3Dyes%26expire%3D1495576921%26keepalive%3Dyes%26pl%3D20%26requiressl%3Dyes%26ip%3D112.10.180.197%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26sparams%3Dclen%252Cdur%252Cei%252Cgir%252Cid%252Cip%252Cipbits%252Citag%252Ckeepalive%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&size=1280x720&quality_label=720p&fps=30&clen=197436751&projection_type=1&init=0-712&itag=136&bitrate=1178637&lmt=1489558414753959&index=713-4800&xtags=&type=video%2Fmp4%3B+codecs%3D%22avc1.4d401f%22,url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26upn%3Di3fy1jr-RXQ%26clen%3D133621028%26dur%3D1802.066%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D247%26key%3Dyt6%26mime%3Dvideo%252Fwebm%26ipbits%3D0%26signature%3D4B3241178C508CF6E7C800D05062C7D070B6E667.CDD6B37265B5E3CF5DE8E6DEC6B692E27F573903%26lmt%3D1489343828738386%26gir%3Dyes%26expire%3D1495576921%26keepalive%3Dyes%26pl%3D20%26requiressl%3Dyes%26ip%3D112.10.180.197%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26sparams%3Dclen%252Cdur%252Cei%252Cgir%252Cid%252Cip%252Cipbits%252Citag%252Ckeepalive%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&size=1280x720&quality_label=720p&fps=30&clen=133621028&projection_type=1&init=0-242&itag=247&bitrate=1203573&lmt=1489343828738386&index=243-6285&xtags=&type=video%2Fwebm%3B+codecs%3D%22vp9%22,url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26upn%3Di3fy1jr-RXQ%26clen%3D94515871%26dur%3D1802.100%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D135%26key%3Dyt6%26mime%3Dvideo%252Fmp4%26ipbits%3D0%26signature%3D1E096FDD012CEBDCA3C7DB68E887E96C29F5804B.05A70494319013A98EA925CD3966FDCB8136B9C4%26lmt%3D1489553952875351%26gir%3Dyes%26expire%3D1495576921%26keepalive%3Dyes%26pl%3D20%26requiressl%3Dyes%26ip%3D112.10.180.197%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26sparams%3Dclen%252Cdur%252Cei%252Cgir%252Cid%252Cip%252Cipbits%252Citag%252Ckeepalive%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&size=854x480&quality_label=480p&fps=30&clen=94515871&projection_type=1&init=0-712&itag=135&bitrate=591277&lmt=1489553952875351&index=713-4800&xtags=&type=video%2Fmp4%3B+codecs%3D%22avc1.4d401f%22,url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26upn%3Di3fy1jr-RXQ%26clen%3D61031078%26dur%3D1802.066%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D244%26key%3Dyt6%26mime%3Dvideo%252Fwebm%26ipbits%3D0%26signature%3DCFC7639AA4E8DB19B5BE7F97987400B3B8FBB9CA.8EC12E812F55AF8FF815689DEE2B9AFD10F6DD6E%26lmt%3D1489343859729957%26gir%3Dyes%26expire%3D1495576921%26keepalive%3Dyes%26pl%3D20%26requiressl%3Dyes%26ip%3D112.10.180.197%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26sparams%3Dclen%252Cdur%252Cei%252Cgir%252Cid%252Cip%252Cipbits%252Citag%252Ckeepalive%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&size=854x480&quality_label=480p&fps=30&clen=61031078&projection_type=1&init=0-242&itag=244&bitrate=592647&lmt=1489343859729957&index=243-6251&xtags=&type=video%2Fwebm%3B+codecs%3D%22vp9%22,url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26upn%3Di3fy1jr-RXQ%26clen%3D44472085%26dur%3D1802.100%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D134%26key%3Dyt6%26mime%3Dvideo%252Fmp4%26ipbits%3D0%26signature%3D2DD1CB56286C4B26BBE7924996A474719825D34B.10BB436E3F0A2865337910ACAA017FD34F9403B4%26lmt%3D1489558445416845%26gir%3Dyes%26expire%3D1495576921%26keepalive%3Dyes%26pl%3D20%26requiressl%3Dyes%26ip%3D112.10.180.197%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26sparams%3Dclen%252Cdur%252Cei%252Cgir%252Cid%252Cip%252Cipbits%252Citag%252Ckeepalive%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&size=640x360&quality_label=360p&fps=30&clen=44472085&projection_type=1&init=0-712&itag=134&bitrate=292865&lmt=1489558445416845&index=713-4800&xtags=&type=video%2Fmp4%3B+codecs%3D%22avc1.4d401e%22,url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26upn%3Di3fy1jr-RXQ%26clen%3D36471521%26dur%3D1802.066%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D243%26key%3Dyt6%26mime%3Dvideo%252Fwebm%26ipbits%3D0%26signature%3D0CF9BE2E20BD5C3C670A3A09B4332FCB8848B127.6227E4F7941B97CD2EB5CCDB6F9B4C70D21F1EE3%26lmt%3D1489343821450410%26gir%3Dyes%26expire%3D1495576921%26keepalive%3Dyes%26pl%3D20%26requiressl%3Dyes%26ip%3D112.10.180.197%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26sparams%3Dclen%252Cdur%252Cei%252Cgir%252Cid%252Cip%252Cipbits%252Citag%252Ckeepalive%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&size=640x360&quality_label=360p&fps=30&clen=36471521&projection_type=1&init=0-242&itag=243&bitrate=370734&lmt=1489343821450410&index=243-6172&xtags=&type=video%2Fwebm%3B+codecs%3D%22vp9%22,url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26upn%3Di3fy1jr-RXQ%26clen%3D55273488%26dur%3D1802.100%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D133%26key%3Dyt6%26mime%3Dvideo%252Fmp4%26ipbits%3D0%26signature%3D3DA34B0DDEA7435269453BA4232E5A56CD7EF6AE.0AB9DF73BEEFF53B5769FEEA010AA0CDD2B83CA7%26lmt%3D1489553952875392%26gir%3Dyes%26expire%3D1495576921%26keepalive%3Dyes%26pl%3D20%26requiressl%3Dyes%26ip%3D112.10.180.197%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26sparams%3Dclen%252Cdur%252Cei%252Cgir%252Cid%252Cip%252Cipbits%252Citag%252Ckeepalive%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&size=426x240&quality_label=240p&fps=30&clen=55273488&projection_type=1&init=0-712&itag=133&bitrate=252423&lmt=1489553952875392&index=713-4800&xtags=&type=video%2Fmp4%3B+codecs%3D%22avc1.4d4015%22,url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26upn%3Di3fy1jr-RXQ%26clen%3D19320224%26dur%3D1802.066%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D242%26key%3Dyt6%26mime%3Dvideo%252Fwebm%26ipbits%3D0%26signature%3D5500717F958E0ADE395DE0E1C6525C7FAB43A0B8.141E87E87B0B6CF142E87E7A6E7B8FDEA04CE388%26lmt%3D1489343821122037%26gir%3Dyes%26expire%3D1495576921%26keepalive%3Dyes%26pl%3D20%26requiressl%3Dyes%26ip%3D112.10.180.197%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26sparams%3Dclen%252Cdur%252Cei%252Cgir%252Cid%252Cip%252Cipbits%252Citag%252Ckeepalive%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&size=426x240&quality_label=240p&fps=30&clen=19320224&projection_type=1&init=0-241&itag=242&bitrate=212438&lmt=1489343821122037&index=242-6020&xtags=&type=video%2Fwebm%3B+codecs%3D%22vp9%22,url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26upn%3Di3fy1jr-RXQ%26clen%3D6517120%26dur%3D1802.100%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D160%26key%3Dyt6%26mime%3Dvideo%252Fmp4%26ipbits%3D0%26signature%3D70AD79800D31795BB142BB205D2A509B5EE15EF0.CE207A722F112AA544D72A7F8F4C0FCACBC1D51B%26lmt%3D1489553943604300%26gir%3Dyes%26expire%3D1495576921%26keepalive%3Dyes%26pl%3D20%26requiressl%3Dyes%26ip%3D112.10.180.197%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26sparams%3Dclen%252Cdur%252Cei%252Cgir%252Cid%252Cip%252Cipbits%252Citag%252Ckeepalive%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&size=256x144&quality_label=144p&fps=30&clen=6517120&projection_type=1&init=0-711&itag=160&bitrate=74312&lmt=1489553943604300&index=712-4799&xtags=&type=video%2Fmp4%3B+codecs%3D%22avc1.4d400c%22,url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26upn%3Di3fy1jr-RXQ%26clen%3D17575230%26dur%3D1802.066%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D278%26key%3Dyt6%26mime%3Dvideo%252Fwebm%26ipbits%3D0%26signature%3D93C3022F59E5E7512D73FCAE77D1D8AC3C1AAB54.DC8E437B4B7F3124043D56F5B776E1A101F6ADBF%26lmt%3D1489343820963235%26gir%3Dyes%26expire%3D1495576921%26keepalive%3Dyes%26pl%3D20%26requiressl%3Dyes%26ip%3D112.10.180.197%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26sparams%3Dclen%252Cdur%252Cei%252Cgir%252Cid%252Cip%252Cipbits%252Citag%252Ckeepalive%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&size=256x144&quality_label=144p&fps=30&clen=17575230&projection_type=1&init=0-241&itag=278&bitrate=107550&lmt=1489343820963235&index=242-5990&xtags=&type=video%2Fwebm%3B+codecs%3D%22vp9%22,itag=140&lmt=1489551394763269&url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26upn%3Di3fy1jr-RXQ%26clen%3D28623402%26dur%3D1802.147%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D140%26key%3Dyt6%26mime%3Daudio%252Fmp4%26ipbits%3D0%26signature%3D50F6EC06BB59A30004B00B48129CD54A55B98759.19AD9E95629C537534771B4BE2C7B171557B4B99%26lmt%3D1489551394763269%26gir%3Dyes%26expire%3D1495576921%26keepalive%3Dyes%26pl%3D20%26requiressl%3Dyes%26ip%3D112.10.180.197%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26sparams%3Dclen%252Cdur%252Cei%252Cgir%252Cid%252Cip%252Cipbits%252Citag%252Ckeepalive%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&clen=28623402&projection_type=1&index=592-2795&xtags=&type=audio%2Fmp4%3B+codecs%3D%22mp4a.40.2%22&bitrate=129527&init=0-591,itag=171&lmt=1489338414089705&url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26upn%3Di3fy1jr-RXQ%26clen%3D30878198%26dur%3D1802.094%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D171%26key%3Dyt6%26mime%3Daudio%252Fwebm%26ipbits%3D0%26signature%3D9F591EEA1BE6C06CACDE4AA6FBA89CCBE20671AF.B79FF5777277BC315987EFD87ECC7EF731077077%26lmt%3D1489338414089705%26gir%3Dyes%26expire%3D1495576921%26keepalive%3Dyes%26pl%3D20%26requiressl%3Dyes%26ip%3D112.10.180.197%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26sparams%3Dclen%252Cdur%252Cei%252Cgir%252Cid%252Cip%252Cipbits%252Citag%252Ckeepalive%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&clen=30878198&projection_type=1&index=4452-7601&xtags=&type=audio%2Fwebm%3B+codecs%3D%22vorbis%22&bitrate=220146&init=0-4451,itag=249&lmt=1489338320397761&url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26upn%3Di3fy1jr-RXQ%26clen%3D11724197%26dur%3D1802.101%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D249%26key%3Dyt6%26mime%3Daudio%252Fwebm%26ipbits%3D0%26signature%3DB9B3E08C9CF90152884000CDC2B82511FEF24FF5.94ABAEBB8B98B309AD034D1928293F0630AC107F%26lmt%3D1489338320397761%26gir%3Dyes%26expire%3D1495576921%26keepalive%3Dyes%26pl%3D20%26requiressl%3Dyes%26ip%3D112.10.180.197%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26sparams%3Dclen%252Cdur%252Cei%252Cgir%252Cid%252Cip%252Cipbits%252Citag%252Ckeepalive%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&clen=11724197&projection_type=1&index=272-3344&xtags=&type=audio%2Fwebm%3B+codecs%3D%22opus%22&bitrate=77914&init=0-271,itag=250&lmt=1489338356913874&url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26upn%3Di3fy1jr-RXQ%26clen%3D15424887%26dur%3D1802.101%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D250%26key%3Dyt6%26mime%3Daudio%252Fwebm%26ipbits%3D0%26signature%3D676084993543835C8D16DA639C3B202B586DF8C6.469BF725069DBBE2D5E1D1F81BDDECBB1FF171E7%26lmt%3D1489338356913874%26gir%3Dyes%26expire%3D1495576921%26keepalive%3Dyes%26pl%3D20%26requiressl%3Dyes%26ip%3D112.10.180.197%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26sparams%3Dclen%252Cdur%252Cei%252Cgir%252Cid%252Cip%252Cipbits%252Citag%252Ckeepalive%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&clen=15424887&projection_type=1&index=272-3345&xtags=&type=audio%2Fwebm%3B+codecs%3D%22opus%22&bitrate=103920&init=0-271,itag=251&lmt=1489338364901424&url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26upn%3Di3fy1jr-RXQ%26clen%3D31106695%26dur%3D1802.101%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D251%26key%3Dyt6%26mime%3Daudio%252Fwebm%26ipbits%3D0%26signature%3D7B9414D730CFF511F85C085F2EB53A8DC5B5F261.3D6B4857B1C9E9B4D483BC1CB4C2D95A38F6FEFB%26lmt%3D1489338364901424%26gir%3Dyes%26expire%3D1495576921%26keepalive%3Dyes%26pl%3D20%26requiressl%3Dyes%26ip%3D112.10.180.197%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26sparams%3Dclen%252Cdur%252Cei%252Cgir%252Cid%252Cip%252Cipbits%252Citag%252Ckeepalive%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&clen=31106695&projection_type=1&index=272-3422&xtags=&type=audio%2Fwebm%3B+codecs%3D%22opus%22&bitrate=209532&init=0-271","aftv":true,"afv_ad_tag":"https://googleads.g.doubleclick.net/pagead/ads?ad_type=skippablevideo_bumpervideo&channel=Vertical_1211%2BVertical_145%2BVertical_211%2BVertical_419%2BVertical_45%2BVertical_557%2BVertical_613%2Bafv_instream%2Bafv_user_id_Qe2Y7V-C9bNMAcCJCBvzQQ%2Bivp%2Byt_bs1%2Byt_bumpers%2Byt_cid_33019762%2Byt_mpvid_pBe0tDME6xbhofzI%2Byt_no_360%2Byt_no_ap%2Byt_no_cp%2Byt_no_wa%2Bytdevice_1%2Bytdevicever_1.20170522%2Bytel_detailpage%2Bytps_default&client=ca-pub-6219811747049371&dbp=ChY2NENWbVZkSDBHTl9zNHhBelIyZkdREAEgASgA&description_url=http%3A%2F%2Fwww.youtube.com%2Fvideo%2FFzU-czBuDbo&hl=zh&host=ca-host-pub-4273961753238206&ht_id=8909688&loeid=9419451,9422596,9431012,9434289,9439823,9446054,9446476,9449081,9451825,9453073,9457115,9457282,9457360,9458998,9460349,9464675,9465353,9465813,9465918,9465926,9466712,9466778,9469360,9472249,9472261,9474358,9474534,9474596,9475727,9476323,9476737,9477064&max_ad_duration=15000&osd=2&pucrd=CgYIABAAGAA&scs=false&sdki=18803DAD&targeting=content&url=http%3A%2F%2Fwww.youtube.com%2Fvideo%2FFzU-czBuDbo&video_cpm=2500000&v_p=DUTvfD8lB7w3RA%3D%3D&ytdevice=1&ytdevicever=1.20170522&yt_pt=APb3F2_zZrFFVNdvbc0AGP35k_qiJQQb3P-EWGEWPyfe_FrJFDRqSznHsE8JUbgxvQXoKlowfVRqcwpQ9IakTwp63NPE3Nhb82K7wo3UTL0nrhtz_wfZumWMqzeRCfkQrN6cZneheNvm9t70MWrA0UdHFCsA9F3-0idTRI02SSFlXdmH0vGIt2VhnsNMxdl5-CR3m8-n_f36oIIoJ16MeIcBrteQYQoPtw3hNsNhsXjnTuVdfIqGmQokXAxTiQF-OhaEzF9JGrmVghBli2E9y-Mlj-5YPi1SGtaDAmLJNQ&yt_vis=0","afv_ad_tag_restricted_to_instream":"https://googleads.g.doubleclick.net/pagead/ads?ad_type=skippablevideo_bumpervideo&channel=Vertical_1211%2BVertical_145%2BVertical_211%2BVertical_419%2BVertical_45%2BVertical_557%2BVertical_613%2Bafv_instream%2Bafv_user_id_Qe2Y7V-C9bNMAcCJCBvzQQ%2Bivp%2Byt_bs1%2Byt_bumpers%2Byt_cid_33019762%2Byt_mpvid_pBe0tDME6xbhofzI%2Byt_no_360%2Byt_no_ap%2Byt_no_cp%2Byt_no_wa%2Bytdevice_1%2Bytdevicever_1.20170522%2Bytel_detailpage%2Bytps_default&client=ca-pub-6219811747049371&dbp=ChY2NENWbVZkSDBHTl9zNHhBelIyZkdREAEgASgA&description_url=http%3A%2F%2Fwww.youtube.com%2Fvideo%2FFzU-czBuDbo&hl=zh&host=ca-host-pub-4273961753238206&ht_id=8909688&loeid=9419451,9422596,9431012,9434289,9439823,9446054,9446476,9449081,9451825,9453073,9457115,9457282,9457360,9458998,9460349,9464675,9465353,9465813,9465918,9465926,9466712,9466778,9469360,9472249,9472261,9474358,9474534,9474596,9475727,9476323,9476737,9477064&max_ad_duration=15000&osd=2&pucrd=CgYIABAAGAA&scs=false&sdki=18803DAD&targeting=content&url=http%3A%2F%2Fwww.youtube.com%2Fvideo%2FFzU-czBuDbo&video_cpm=2500000&v_p=DUTvfD8lB7w3RA%3D%3D&ytdevice=1&ytdevicever=1.20170522&yt_pt=APb3F2_zZrFFVNdvbc0AGP35k_qiJQQb3P-EWGEWPyfe_FrJFDRqSznHsE8JUbgxvQXoKlowfVRqcwpQ9IakTwp63NPE3Nhb82K7wo3UTL0nrhtz_wfZumWMqzeRCfkQrN6cZneheNvm9t70MWrA0UdHFCsA9F3-0idTRI02SSFlXdmH0vGIt2VhnsNMxdl5-CR3m8-n_f36oIIoJ16MeIcBrteQYQoPtw3hNsNhsXjnTuVdfIqGmQokXAxTiQF-OhaEzF9JGrmVghBli2E9y-Mlj-5YPi1SGtaDAmLJNQ&yt_vis=0","afv_instream_max":"15000","allow_below_the_player_companion":true,"allow_embed":"1","allow_html5_ads":"1","allow_ratings":"1","apiary_host":"","apiary_host_firstparty":"","apply_fade_on_midrolls":true,"as_launched_in_country":"0","atc":"a=3&b=ACK5TOnFLhe86ZP2tAk6PLJI4Jc&c=1495555321&d=1&e=FzU-czBuDbo&c3a=27&c1a=1&c6a=1&hh=fdhDUUTEbODN0LcRHKEv2viLKNQ","author":"Latte ASMR","avg_rating":"4.82895517349","c":"WEB","cbr":"Firefox","cbrver":"3.0.1","cid":"33019762","cl":"156769008","core_dbp":"ChY2NENWbVZkSDBHTl9zNHhBelIyZkdREAEgASgA","cos":"Windows","cosver":"5.2","cr":"US","csi_page_type":"watch,watch7ad_html5","cver":"1.20170522","dbp":"Ch4KFjY0Q1ZtVmRIMEdOX3M0eEF6UjJmR1EQASABKAAQARgC","dclk":true,"enablecsi":"1","enabled_engage_types":"1,3,4,5,6,17","enablejsapi":"1","encoded_ad_safety_reason":"CgA","eventid":"-VwkWbbxGuSq4AK4lK3oBg","excluded_ads":"46=14_14;59=14_14;77=1_1,1_3,2_1,2_3;94=15_2_1,15_2_4,17_2_1","fade_in_duration_milliseconds":"1000","fade_in_start_milliseconds":"-3000","fade_out_duration_milliseconds":"1000","fade_out_start_milliseconds":"0","fexp":"9419451,9422596,9431012,9434046,9434289,9439823,9446054,9446364,9446476,9449243,9453073,9453897,9456640,9457141,9457282,9457360,9458998,9463594,9463965,9464675,9465353,9465813,9465918,9465926,9466712,9466778,9466778,9466793,9466795,9466797,9467217,9468798,9468800,9468805,9469224,9469360,9472249,9472261,9474358,9474534,9474596,9475727,9476737,9477064,9477080","fflags":"html5_enable_embedded_player_visibility_signals=true&html5_tight_max_buffer_allowed_impaired_time=0.0&mweb_muted_autoplay_animation=none&html5_serverside_biscotti_id_wait_ms=1000&html5_observed_downgrade_prop=0.0&html5_bandwidth_window_size=0&yto_enable_watch_offer_module=true&html5_connect_timeout_secs=7.0&html5_max_buffer_duration=0&html5_background_cap_idle_secs=60&mysubs_highlight_shelf_counterfactual=false&ios_disable_notification_preprompt=true&html5_reduce_startup_rebuffers=true&android_buy_bucket_buy_flows=true&dynamic_ad_break_seek_threshold_sec=0&disable_trusted_ad_domains_player_check=true&html5_variability_full_discount_thresh=3.0&enable_live_state_auth=true&use_new_skip_icon=true&lugash_header_warmup=true&youtubei_for_web=true&use_new_style=true&html5_min_upgrade_health=0&live_readahead_seconds_multiplier=0.8&html5_min_readbehind_secs=0&kids_enable_terms_servlet=true&signed_out_notifications_inbox=true&request_mpu_on_unfilled_ad_break=true&yto_feature_hub_channel=false&enable_pla_desktop_shelf=true&html5_max_buffer_health_for_downgrade=15&html5_no_clear_on_quota_exceeded=true&uniplayer_dbp=true&player_destroy_old_version=true&html5_max_vss_watchtime_ratio=0.0&mweb_pu_android_chrome_54_above=true&desktop_cleanup_companion_on_instream_begin=true&persist_text_on_preview_button=true&html5_adjust_effective_request_size=true&mobile_disable_ad_mob_on_home=true&kids_asset_theme=server_side_assets&html5_subsegment_readahead_timeout_secs=2.0&html5_background_quality_cap=360&html5_live_disable_dg_pacing=true&html5_progressive_signature_reload=true&kids_enable_block_servlet=true&player_interaction_logging=true&html5_msi_error_fallback=true&html5_always_enable_timeouts=true&html5_get_video_info_promiseajax=true&html5_seeks_are_not_rebuffers=true&yto_enable_ytr_promo_refresh_assets=true&html5_max_readahead_bandwidth_cap=0&show_countdown_on_bumper=true&html5_throttle_burst_secs=0.0&yto_enable_unlimited_landing_page_yto_features=true&enable_playlist_multi_season=true&html5_live_pin_to_tail=true&enable_offer_restricts_for_watch_page_offers=true&html5_deadzone_multiplier=1.1&new_promo_page=true&stop_using_ima_sdk_gpt_request_activity=true&html5_min_readbehind_cap_secs=0&html5_pause_manifest_ended=true&disable_indisplay_adunit_on_embedded=true&html5_throttle_rate=0.0&use_forced_linebreak_preskip_text=true&show_thumbnail_on_standard=true&html5_min_startup_smooth_target=10.0&mweb_blacklist_progressive_chrome_mobile=true&html5_playing_event_buffer_underrun=true&html5_clearance_fix=true&html5_reseek_on_infinite_buffer=true&exo_drm_max_keyfetch_delay_ms=0&html5_disable_audio_slicing=true&king_crimson_player_redux=true&live_fresca_v2=true&disable_search_mpu=true&html5_request_size_min_secs=0.0&html5_allowable_liveness_drift_chunks=2&kids_enable_post_onboarding_red_flow=true&html5_min_vss_watchtime_to_cut_secs=0.0&html5_subsegment_readahead_tail_margin_secs=0.2&mweb_enable_skippables_on_iphone=true&html5_new_preloading=true&html5_check_for_reseek=true&html5_min_buffer_to_resume=6&html5_ad_no_buffer_abort_after_skippable=true&dash_manifest_version=5&html5_subsegment_readahead_progress_timeout_fraction=0.8&flex_theater_mode=true&html5_stale_dash_manifest_retry_factor=1.0&html5_subsegment_readahead_target_buffer_health_secs=0.5&fixed_padding_skip_button=true&html5_variability_discount=0.5&mpu_visible_threshold_count=2&ad_duration_threshold_for_showing_endcap_seconds=15&forced_brand_precap_duration_ms=2000&send_html5_api_stats_ads_abandon=true&sdk_wrapper_levels_allowed=0&html5_suspend_manifest_on_pause=true&enable_plus_page_pts=true&send_api_stats_ads_asr=true&html5_long_term_bandwidth_window_size=0&html5_strip_emsg=true&use_push_for_desktop_live_chat=true&html5_default_quality_cap=0&signed_out_notification_settings=true&spherical_on_android_iframe=true&max_resolution_for_white_noise=360&doubleclick_gpt_retagging=true&dynamic_ad_break_pause_threshold_sec=0&android_enable_thumbnail_overlay_side_panel=false&lugash_header_by_service=true&variable_load_timeout_ms=0&html5_min_vss_watchtime_to_cut_secs_redux=0.0&html5_disable_non_contiguous=true&yt_unlimited_pts_skip_ads_promo_desktop_always=true&html5_disable_urgent_upgrade_for_quality=true&html5_live_4k_more_buffer=true&android_native_live_enablement=true&html5_post_interrupt_readahead=20&html5_bandwidth_multisample_width=0.4&sidebar_renderers=true&html5_repredict_interval_secs=0.0&html5_min_secs_between_format_selections=8.0&interaction_log_delayed_event_batch_size=200&html5_elbow_tracking_tweaks=true&html5_request_sizing_multiplier=0.8&html5_use_adaptive_live_readahead=true&mweb_autonav_paddles=true&html5_report_conn=true&html5_suspended_state=true&html5_timeupdate_readystate_check=true&postroll_notify_time_seconds=5&chrome_promo_enabled=true&disable_new_pause_state3=true&html5_preload_size_excludes_metadata=true&html5_vp9_live_whitelist=false&enable_ccs_buy_flow_for_chirp=true&fix_gpt_pos_params=true&embed_force_rel=true&pla_shelf_hovercard=true&html5_repredict_misses=5&use_fast_fade_in_0s=true&html5_always_reload_on_403=true&html5_spherical_bicubic_mode=0&lock_fullscreen=false&ios_enable_mixin_accessibility_custom_actions=true&vss_dni_delayping=0&midroll_notify_time_seconds=5&kids_enable_privacy_notice=true&kids_enable_server_side_assets=true&ios_notifications_disabled_subs_tab_promoted_item_promo=true&html5_local_max_byterate_lookahead=15&html5_deferred_source_buffer_creation=true&ad_video_end_renderer_duration_milliseconds=7000&playready_on_borg=true&html5_trust_platform_bitrate_limits=true&website_actions_throttle_percentage=1.0&html5_max_av_sync_drift=50&html5_nnr_downgrade_count=4&html5_idle_preload_secs=1&legacy_autoplay_flag=true&html5_tight_max_buffer_allowed_bandwidth_stddevs=0.0&king_crimson_player=false&html5_retry_media_element_errors_delay=0&html5_variability_no_discount_thresh=1.0&html5_get_video_info_timeout_ms=0&autoplay_time=8000&live_chunk_readahead=3&enable_red_carpet_p13n_shelves=true&polymer_report_missing_web_navigation_endpoint=false&html5_use_mediastream_timestamp=true&enable_local_channel=true","fmt_list":"22/1280x720/9/0/115,43/640x360/99/0/0,18/640x360/9/0/115,36/320x180/99/1/0,17/176x144/99/1/0","gapi_hint_params":"m;/_/scs/abc-static/_/js/k=gapi.gapi.en.DTPeBB_SvOA.O/m=__features__/rt=j/d=1/rs=AHpOoo-J3J0yqNDMPVrmQT6j-SBFfGx8oA","gpt_migration":"1","gut_tag":"/4061/ytpwmpu","hl":"zh_CN","host_language":"zh-CN","idpj":"-1","innertube_api_key":"AIzaSyAO_FJ2SlqU8Q4STEHLGCilw_Y9_11qcW8","innertube_api_version":"v1","innertube_context_client_version":"1.20170522","instream_long":false,"is_listed":"1","itct":"CAMQu2kiEwj20bTdsYbUAhVkFVgKHThKC20o-B0=","keywords":"ASMR,Japanese ASMR,耳かき店 Roleplay,ASMR 日本語,Ear Massage,Ear Cleaning,Latte ASMR","ldpj":"-34","length_seconds":"1802","loaderUrl":"https://www.youtube.com/watch?v=FzU-czBuDbo&t=1602s","loeid":"9419451,9422596,9431012,9434289,9439823,9446054,9446476,9451825,9453073,9457115,9457282,9457360,9458998,9460349,9464675,9465353,9465813,9465918,9465926,9466712,9466778,9469360,9472249,9472261,9474358,9474534,9474596,9475727,9476323,9476737,9477064","loudness":"-32.3489990234","midroll_freqcap":"420.0","midroll_prefetch_size":"1","mpvid":"pBe0tDME6xbhofzI","no_get_video_log":"1","of":"64CVmVdH0GN_s4xAzR2fGQ","oid":"apV73wkvNI0JU_RPaJ0ncw","player_error_log_fraction":"1.0","player_response":"{\"videoDetails\":{\"thumbnail\":{\"thumbnails\":[{\"url\":\"https://i.ytimg.com/vi/FzU-czBuDbo/hqdefault.jpg?custom=true\\u0026w=168\\u0026h=94\\u0026stc=true\\u0026jpg444=true\\u0026jpgq=90\\u0026sp=67\\u0026sigh=VPRtETmXTPk6rkIL6Nx1GEaRbCI\",\"width\":168,\"height\":94},{\"url\":\"https://i.ytimg.com/vi/FzU-czBuDbo/hqdefault.jpg?custom=true\\u0026w=196\\u0026h=110\\u0026stc=true\\u0026jpg444=true\\u0026jpgq=90\\u0026sp=67\\u0026sigh=P__H_uO8hPlvdQ_vuAqB-MdXfNI\",\"width\":196,\"height\":110},{\"url\":\"https://i.ytimg.com/vi/FzU-czBuDbo/hqdefault.jpg?custom=true\\u0026w=246\\u0026h=138\\u0026stc=true\\u0026jpg444=true\\u0026jpgq=90\\u0026sp=67\\u0026sigh=LOH3kFdu_0sCFKaauc7w51PXmXE\",\"width\":246,\"height\":138},{\"url\":\"https://i.ytimg.com/vi/FzU-czBuDbo/hqdefault.jpg?custom=true\\u0026w=336\\u0026h=188\\u0026stc=true\\u0026jpg444=true\\u0026jpgq=90\\u0026sp=67\\u0026sigh=r9g01EmxZtG0nTnXAa8vNGAerAI\",\"width\":336,\"height\":188}]}},\"adSafetyReason\":{}}","plid":"AAVQMxuu5Yd_tXdG","pltype":"content","ppv_remarketing_url":"https://www.googleadservices.com/pagead/conversion/971134070/?backend=innertube&cname=1&cver=1_20170522&data=backend%3Dinnertube%3Bcname%3D1%3Bcver%3D1_20170522%3Bdactive%3DNone%3Bdynx_itemid%3DFzU-czBuDbo%3Bptype%3Dppv&label=iuZUCLmC72YQ9qiJzwM&ptype=ppv","probe_url":"https://r11---sn-hp57kn7d.googlevideo.com/videogoodput?id=o-AB4zqDHWzip4AQOFrY8xPdULKXi_9V5I08xS-jRs8a4e&source=goodput&range=0-4999&expire=1495558921&ip=112.10.180.197&ms=pm&mm=35&pl=24&nh=IgpwcjA0Lm1pYTA0Kg02My4yNDMuMTUyLjIx&sparams=id,source,range,expire,ip,ms,mm,pl,nh&signature=1D704E3A908C4CE69E99A5AA32810465EFD83A3B.833D8C2967132F7C988486E5964DA8A640FB4B14&key=cms1","ptchn":"Qe2Y7V-C9bNMAcCJCBvzQQ","ptk":"Qe2Y7V-C9bNMAcCJCBvzQQ","pyv_ad_channel":"","relative_loudness":"-11.3489990234","resume":"1","sffb":true,"show_content_thumbnail":true,"show_pyv_in_related":false,"ssl":"1","start":"1602.0","storyboard_spec":"https://i9.ytimg.com/sb/FzU-czBuDbo/storyboard3_L$L/$N.jpg|48#27#100#10#10#0#default#KuwtKTR-s8QnjlLm6dSFkgGk5eU|80#45#182#10#10#10000#M$M#x2uvQNTzwnVtpbE6bOLe3pTfAv8|160#90#182#5#5#10000#M$M#QfIcpTPrOsKfmmbvlSKpxxPtr5c","swf_player_response":"1","t":"1","tag_for_child_directed":false,"thumbnail_url":"https://i.ytimg.com/vi/FzU-czBuDbo/default.jpg","timestamp":"1495555321","title":"ASMR 日本語 耳かき店 Roleplay / Ear Cleaning & Ear Massage / Japanese","tmi":"1","token":"1","trueview":true,"ucid":"UCQe2Y7V-C9bNMAcCJCBvzQQ","url_encoded_fmt_stream_map":"itag=22&type=video%2Fmp4%3B+codecs%3D%22avc1.64001F%2C+mp4a.40.2%22&url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26expire%3D1495576921%26ratebypass%3Dyes%26upn%3Di3fy1jr-RXQ%26pl%3D20%26requiressl%3Dyes%26dur%3D1802.147%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D22%26key%3Dyt6%26ip%3D112.10.180.197%26mime%3Dvideo%252Fmp4%26ipbits%3D0%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26signature%3DC0E6EADCE77DE9C9BC9582885C64A3AA4AEB35E5.122562F26678A0D43659A7FF70029458A53C9946%26lmt%3D1489558682126127%26sparams%3Ddur%252Cei%252Cid%252Cip%252Cipbits%252Citag%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Cratebypass%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&quality=hd720,itag=43&type=video%2Fwebm%3B+codecs%3D%22vp8.0%2C+vorbis%22&url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26ratebypass%3Dyes%26clen%3D110292173%26dur%3D0.000%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D43%26key%3Dyt6%26mime%3Dvideo%252Fwebm%26ipbits%3D0%26signature%3D396243DC125E81E659F183CAD35D79D761826BC2.6C310673B6AA41DE6D1FEE1D3CB6D853C0A897B5%26lmt%3D1489338283235111%26gir%3Dyes%26upn%3Di3fy1jr-RXQ%26expire%3D1495576921%26pl%3D20%26requiressl%3Dyes%26ip%3D112.10.180.197%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26sparams%3Dclen%252Cdur%252Cei%252Cgir%252Cid%252Cip%252Cipbits%252Citag%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Cratebypass%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&quality=medium,itag=18&type=video%2Fmp4%3B+codecs%3D%22avc1.42001E%2C+mp4a.40.2%22&url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26ratebypass%3Dyes%26clen%3D81888988%26dur%3D1802.147%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D18%26key%3Dyt6%26mime%3Dvideo%252Fmp4%26ipbits%3D0%26signature%3D82CC52A76B4B1DD168FF503F6E6C45232584A081.A39EC7A4C70FA4C6316DFE5A0E6B4267F749421F%26lmt%3D1489551580633796%26gir%3Dyes%26upn%3Di3fy1jr-RXQ%26expire%3D1495576921%26pl%3D20%26requiressl%3Dyes%26ip%3D112.10.180.197%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26sparams%3Dclen%252Cdur%252Cei%252Cgir%252Cid%252Cip%252Cipbits%252Citag%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Cratebypass%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&quality=medium,itag=36&type=video%2F3gpp%3B+codecs%3D%22mp4v.20.3%2C+mp4a.40.2%22&url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26upn%3Di3fy1jr-RXQ%26clen%3D45930413%26dur%3D1802.193%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D36%26key%3Dyt6%26mime%3Dvideo%252F3gpp%26ipbits%3D0%26signature%3D49C4AC0253A51BD1AF7C8F4D950760D8D4B58C29.28782511BA47853C1364831793C3E79FD5206437%26lmt%3D1489331171485251%26gir%3Dyes%26expire%3D1495576921%26pl%3D20%26requiressl%3Dyes%26ip%3D112.10.180.197%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26sparams%3Dclen%252Cdur%252Cei%252Cgir%252Cid%252Cip%252Cipbits%252Citag%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&quality=small,itag=17&type=video%2F3gpp%3B+codecs%3D%22mp4v.20.3%2C+mp4a.40.2%22&url=https%3A%2F%2Fr5---sn-i3b7kn7r.googlevideo.com%2Fvideoplayback%3Fmn%3Dsn-i3b7kn7r%26source%3Dyoutube%26mm%3D31%26upn%3Di3fy1jr-RXQ%26clen%3D15516069%26dur%3D1802.193%26mv%3Du%26mt%3D1495555066%26ms%3Dau%26itag%3D17%26key%3Dyt6%26mime%3Dvideo%252F3gpp%26ipbits%3D0%26signature%3DD0A72D1D6A275F67E17E1C0BCF8A130D242153D8.1D3DE090C4CF03EF6BECE78EC0FC164B7A934207%26lmt%3D1489331145668199%26gir%3Dyes%26expire%3D1495576921%26pl%3D20%26requiressl%3Dyes%26ip%3D112.10.180.197%26ei%3D-VwkWbbxGuSq4AK4lK3oBg%26sparams%3Dclen%252Cdur%252Cei%252Cgir%252Cid%252Cip%252Cipbits%252Citag%252Clmt%252Cmime%252Cmm%252Cmn%252Cms%252Cmv%252Cpl%252Crequiressl%252Csource%252Cupn%252Cexpire%26id%3Do-AIjZ-7O5ARqOWqHUVRX_CUDfapOpqDdrfB5939FMQkgL&quality=small","video_id":"FzU-czBuDbo","videostats_playback_base_url":"https://s.youtube.com/api/stats/playback?len=1803&vm=CAEQARgE&plid=AAVQMxuu5Yd_tXdG&el=detailpage&cl=156769008&of=64CVmVdH0GN_s4xAzR2fGQ&docid=FzU-czBuDbo&ns=yt&ei=-VwkWbbxGuSq4AK4lK3oBg&fexp=9419451%2C9422596%2C9431012%2C9434046%2C9434289%2C9439823%2C9446054%2C9446364%2C9446476%2C9449243%2C9453073%2C9453897%2C9456640%2C9457141%2C9457282%2C9457360%2C9458998%2C9463594%2C9463965%2C9464675%2C9465353%2C9465813%2C9465918%2C9465926%2C9466712%2C9466778%2C9466778%2C9466793%2C9466795%2C9466797%2C9467217%2C9468798%2C9468800%2C9468805%2C9469224%2C9469360%2C9472249%2C9472261%2C9474358%2C9474534%2C9474596%2C9475727%2C9476737%2C9477064%2C9477080","view_count":"415609","vm":"CAEQARgE","vmap":"<?xml version=\"1.0\" encoding=\"UTF-8\"?><vmap:VMAP xmlns:vmap=\"http://www.iab.net/videosuite/vmap\" xmlns:yt=\"http://youtube.com\" version=\"1.0\"><vmap:AdBreak breakType=\"linear\" timeOffset=\"start\"><vmap:AdSource allowMultipleAds = \"false\"><vmap:VASTData><VAST version=\"3.0\"><Ad><Wrapper><AdSystem version=\"1\">YT:DoubleClick</AdSystem><VASTAdTagURI><![CDATA[https://pubads.g.doubleclick.net/gampad/ads?ad_rule=0&env=vp&gdfp_req=1&iu=/4061/com.ytpwmpu.peopleandblogs&loeid=9446476,9451825,9457141,9469556,9469911&osd=2&output=xml_vast3&pucrd=CgYIABAAGAA&scor=1&scp=av%3D1%26kpeid%3DQe2Y7V-C9bNMAcCJCBvzQQ%26kpid%3D33019762%26kvid%3DFzU-czBuDbo%26mpvid%3DpBe0tDME6xbhofzI%26ssl%3D1%26afv%3D1%26dbp%3DChY2NENWbVZkSDBHTl9zNHhBelIyZkdREAEgASgA%26dc_yt%3D1%26excl_cat%3D33019762%26k2%3D3,36,44,45,145,211,419,557,613,1211%26k5%3D3_36_44_45_145_211_419_557_613_1211%26kga%3D-1%26kgg%3D-1%26kgpt%3D1%26klg%3Dzh-cn%26kmyd%3Dwatch-longform-ad%26ko%3Dp%26kr%3DF%26kvlg%3Dja%26kvz%3D205%26nlfb%3D1%26p13_rm%3D1%26pos%3Dpre%26yt1st%3D1%26yt3pav%3D1%26ytcat%3D22%26ytdevice%3D1%26ytdevicever%3D1.20170522%26ytexp%3D9419451,9422596,9431012,9434289,9439823,9446054,9446476,9451825,9453073,9457115,9457282,9457360,9458998,9460349,9464675,9465353,9465813,9465918,9465926,9466712,9466778,9469360,9472249,9472261,9474358,9474534,9474596,9475727,9476323,9476737,9477064%26yt_ec%3D4%26yt_ec2%3D14%26yt_vrallowed%3D1&sdki=18803DAD&sz=480x361&unviewed_position_start=1&vid=FzU-czBuDbo&vpos=preroll&ytdevice=1&yt_pt=APb3F2_zZrFFVNdvbc0AGP35k_qiJQQb3P-EWGEWPyfe_FrJFDRqSznHsE8JUbgxvQXoKlowfVRqcwpQ9IakTwp63NPE3Nhb82K7wo3UTL0nrhtz_wfZumWMqzeRCfkQrN6cZneheNvm9t70MWrA0UdHFCsA9F3-0idTRI02SSFlXdmH0vGIt2VhnsNMxdl5-CR3m8-n_f36oIIoJ16MeIcBrteQYQoPtw3hNsNhsXjnTuVdfIqGmQokXAxTiQF-OhaEzF9JGrmVghBli2E9y-Mlj-5YPi1SGtaDAmLJNQ]]></VASTAdTagURI><Impression><![CDATA[https://www.youtube.com/api/stats/ads?ver=2&ns=1&event=2&device=1&content_v=FzU-czBuDbo&el=detailpage&ei=-VwkWbbxGuSq4AK4lK3oBg&devicever=1.20170522&asr=CgA&format=[FORMAT_NAMESPACE]_[FORMAT_TYPE]_[FORMAT_SUBTYPE]&break_type=[BREAK_TYPE]&conn=[CONN]&cpn=[CPN]&lact=[LACT]&m_pos=[MIDROLL_POS]&mt=[MT]&p_h=[P_H]&p_w=[P_W]&rwt=[RWT]&sdkv=[SDKV]&slot_pos=[SLOT_POS]&vis=[VIS]&vol=[VOL]&wt=[WT]&ad_cpn=[AD_CPN]&ad_id=[AD_ID]&ad_len=[AD_LEN]&ad_mt=[AD_MT]&ad_sys=[AD_SYS]&ad_v=[AD_V]&aqi=]]></Impression><Error><![CDATA[https://www.youtube.com/api/stats/ads?ver=2&ns=1&event=5&device=1&content_v=FzU-czBuDbo&el=detailpage&ei=-VwkWbbxGuSq4AK4lK3oBg&devicever=1.20170522&format=[FORMAT_NAMESPACE]_[FORMAT_TYPE]_[FORMAT_SUBTYPE]&break_type=[BREAK_TYPE]&conn=[CONN]&cpn=[CPN]&lact=[LACT]&m_pos=[MIDROLL_POS]&mt=[MT]&p_h=[P_H]&p_w=[P_W]&rwt=[RWT]&sdkv=[SDKV]&slot_pos=[SLOT_POS]&vis=[VIS]&vol=[VOL]&wt=[WT]&ad_cpn=[AD_CPN]&ad_id=[AD_ID]&ad_len=[AD_LEN]&ad_mt=[AD_MT]&ad_sys=[AD_SYS]&ad_v=[AD_V]&blocking_error=[BLOCKING_ERROR]&error_msg=[ERROR_MSG]&ima_error=[IMA_ERROR]&internal_id=[INTERNAL_ID]&error_code=[YT_ERROR_CODE]&aqi=]]></Error><Creatives><Creative><Linear><TrackingEvents><Tracking event=\"skip\"><![CDATA[https://www.youtube.com/api/stats/ads?ver=2&ns=1&event=7&device=1&content_v=FzU-czBuDbo&el=detailpage&ei=-VwkWbbxGuSq4AK4lK3oBg&devicever=1.20170522&format=[FORMAT_NAMESPACE]_[FORMAT_TYPE]_[FORMAT_SUBTYPE]&break_type=[BREAK_TYPE]&conn=[CONN]&cpn=[CPN]&lact=[LACT]&m_pos=[MIDROLL_POS]&mt=[MT]&p_h=[P_H]&p_w=[P_W]&rwt=[RWT]&sdkv=[SDKV]&slot_pos=[SLOT_POS]&vis=[VIS]&vol=[VOL]&wt=[WT]&ad_cpn=[AD_CPN]&ad_id=[AD_ID]&ad_len=[AD_LEN]&ad_mt=[AD_MT]&ad_sys=[AD_SYS]&ad_v=[AD_V]&i_x=[I_X]&i_y=[I_Y]&aqi=]]></Tracking><Tracking event=\"complete\"><![CDATA[https://www.youtube.com/api/stats/ads?ver=2&ns=1&event=3&device=1&content_v=FzU-czBuDbo&el=detailpage&ei=-VwkWbbxGuSq4AK4lK3oBg&devicever=1.20170522&format=[FORMAT_NAMESPACE]_[FORMAT_TYPE]_[FORMAT_SUBTYPE]&break_type=[BREAK_TYPE]&conn=[CONN]&cpn=[CPN]&lact=[LACT]&m_pos=[MIDROLL_POS]&mt=[MT]&p_h=[P_H]&p_w=[P_W]&rwt=[RWT]&sdkv=[SDKV]&slot_pos=[SLOT_POS]&vis=[VIS]&vol=[VOL]&wt=[WT]&ad_cpn=[AD_CPN]&ad_id=[AD_ID]&ad_len=[AD_LEN]&ad_mt=[AD_MT]&ad_sys=[AD_SYS]&ad_v=[AD_V]&aqi=]]></Tracking><Tracking event=\"progress\" offset=\"00:00:30.000\"><![CDATA[https://www.youtube.com/api/stats/ads?ver=2&ns=1&event=8&device=1&content_v=FzU-czBuDbo&el=detailpage&ei=-VwkWbbxGuSq4AK4lK3oBg&devicever=1.20170522&format=[FORMAT_NAMESPACE]_[FORMAT_TYPE]_[FORMAT_SUBTYPE]&break_type=[BREAK_TYPE]&conn=[CONN]&cpn=[CPN]&lact=[LACT]&m_pos=[MIDROLL_POS]&mt=[MT]&p_h=[P_H]&p_w=[P_W]&rwt=[RWT]&sdkv=[SDKV]&slot_pos=[SLOT_POS]&vis=[VIS]&vol=[VOL]&wt=[WT]&ad_cpn=[AD_CPN]&ad_id=[AD_ID]&ad_len=[AD_LEN]&ad_mt=[AD_MT]&ad_sys=[AD_SYS]&ad_v=[AD_V]&aqi=]]></Tracking></TrackingEvents><VideoClicks><ClickTracking><![CDATA[https://www.youtube.com/api/stats/ads?ver=2&ns=1&event=6&device=1&content_v=FzU-czBuDbo&el=detailpage&ei=-VwkWbbxGuSq4AK4lK3oBg&devicever=1.20170522&format=[FORMAT_NAMESPACE]_[FORMAT_TYPE]_[FORMAT_SUBTYPE]&break_type=[BREAK_TYPE]&conn=[CONN]&cpn=[CPN]&lact=[LACT]&m_pos=[MIDROLL_POS]&mt=[MT]&p_h=[P_H]&p_w=[P_W]&rwt=[RWT]&sdkv=[SDKV]&slot_pos=[SLOT_POS]&vis=[VIS]&vol=[VOL]&wt=[WT]&ad_cpn=[AD_CPN]&ad_id=[AD_ID]&ad_len=[AD_LEN]&ad_mt=[AD_MT]&ad_sys=[AD_SYS]&ad_v=[AD_V]&i_x=[I_X]&i_y=[I_Y]&aqi=]]></ClickTracking></VideoClicks></Linear></Creative></Creatives><Extensions><Extension type=\"waterfall\" fallback_index=\"1\"/><Extension type=\"activeview\"><CustomTracking><Tracking event=\"viewable_impression\"><![CDATA[https://www.youtube.com/api/stats/ads?ver=2&ns=1&event=11&device=1&content_v=FzU-czBuDbo&el=detailpage&ei=-VwkWbbxGuSq4AK4lK3oBg&devicever=1.20170522&format=[FORMAT_NAMESPACE]_[FORMAT_TYPE]_[FORMAT_SUBTYPE]&break_type=[BREAK_TYPE]&conn=[CONN]&cpn=[CPN]&lact=[LACT]&m_pos=[MIDROLL_POS]&mt=[MT]&p_h=[P_H]&p_w=[P_W]&rwt=[RWT]&sdkv=[SDKV]&slot_pos=[SLOT_POS]&vis=[VIS]&vol=[VOL]&wt=[WT]&ad_cpn=[AD_CPN]&ad_id=[AD_ID]&ad_len=[AD_LEN]&ad_mt=[AD_MT]&ad_sys=[AD_SYS]&ad_v=[AD_V]&aqi=]]></Tracking></CustomTracking></Extension></Extensions></Wrapper></Ad><Ad><Wrapper><AdSystem version=\"1\">YT:AdSense</AdSystem><VASTAdTagURI><![CDATA[https://googleads.g.doubleclick.net/pagead/ads?ad_type=skippablevideo_bumpervideo&channel=Vertical_1211%2BVertical_145%2BVertical_211%2BVertical_419%2BVertical_45%2BVertical_557%2BVertical_613%2Bafv_instream%2Bafv_user_id_Qe2Y7V-C9bNMAcCJCBvzQQ%2Bivp%2Byt_bs1%2Byt_bumpers%2Byt_cid_33019762%2Byt_mpvid_pBe0tDME6xbhofzI%2Byt_no_360%2Byt_no_ap%2Byt_no_cp%2Byt_no_wa%2Bytdevice_1%2Bytdevicever_1.20170522%2Bytel_detailpage%2Bytps_default&client=ca-pub-6219811747049371&dbp=ChY2NENWbVZkSDBHTl9zNHhBelIyZkdREAEgASgA&description_url=http%3A%2F%2Fwww.youtube.com%2Fvideo%2FFzU-czBuDbo&hl=zh&host=ca-host-pub-4273961753238206&ht_id=8909688&loeid=9419451,9422596,9431012,9434289,9439823,9446054,9446476,9449081,9451825,9453073,9457115,9457282,9457360,9458998,9460349,9464675,9465353,9465813,9465918,9465926,9466712,9466778,9469360,9472249,9472261,9474358,9474534,9474596,9475727,9476323,9476737,9477064&max_ad_duration=15000&osd=2&pucrd=CgYIABAAGAA&scs=false&sdki=18803DAD&targeting=content&url=http%3A%2F%2Fwww.youtube.com%2Fvideo%2FFzU-czBuDbo&video_cpm=2500000&videoad_start_delay=0&v_p=DUTvfD8lB7w3RA%3D%3D&ytdevice=1&ytdevicever=1.20170522&yt_pt=APb3F2_zZrFFVNdvbc0AGP35k_qiJQQb3P-EWGEWPyfe_FrJFDRqSznHsE8JUbgxvQXoKlowfVRqcwpQ9IakTwp63NPE3Nhb82K7wo3UTL0nrhtz_wfZumWMqzeRCfkQrN6cZneheNvm9t70MWrA0UdHFCsA9F3-0idTRI02SSFlXdmH0vGIt2VhnsNMxdl5-CR3m8-n_f36oIIoJ16MeIcBrteQYQoPtw3hNsNhsXjnTuVdfIqGmQokXAxTiQF-OhaEzF9JGrmVghBli2E9y-Mlj-5YPi1SGtaDAmLJNQ&yt_vis=0]]></VASTAdTagURI><Impression><![CDATA[https://www.youtube.com/api/stats/ads?ver=2&ns=1&event=2&device=1&content_v=FzU-czBuDbo&el=detailpage&ei=-VwkWbbxGuSq4AK4lK3oBg&devicever=1.20170522&asr=CgA&format=[FORMAT_NAMESPACE]_[FORMAT_TYPE]_[FORMAT_SUBTYPE]&break_type=[BREAK_TYPE]&conn=[CONN]&cpn=[CPN]&lact=[LACT]&m_pos=[MIDROLL_POS]&mt=[MT]&p_h=[P_H]&p_w=[P_W]&rwt=[RWT]&sdkv=[SDKV]&slot_pos=[SLOT_POS]&vis=[VIS]&vol=[VOL]&wt=[WT]&ad_cpn=[AD_CPN]&ad_id=[AD_ID]&ad_len=[AD_LEN]&ad_mt=[AD_MT]&ad_sys=[AD_SYS]&ad_v=[AD_V]&aqi=]]></Impression><Error><![CDATA[https://www.youtube.com/api/stats/ads?ver=2&ns=1&event=5&device=1&content_v=FzU-czBuDbo&el=detailpage&ei=-VwkWbbxGuSq4AK4lK3oBg&devicever=1.20170522&format=[FORMAT_NAMESPACE]_[FORMAT_TYPE]_[FORMAT_SUBTYPE]&break_type=[BREAK_TYPE]&conn=[CONN]&cpn=[CPN]&lact=[LACT]&m_pos=[MIDROLL_POS]&mt=[MT]&p_h=[P_H]&p_w=[P_W]&rwt=[RWT]&sdkv=[SDKV]&slot_pos=[SLOT_POS]&vis=[VIS]&vol=[VOL]&wt=[WT]&ad_cpn=[AD_CPN]&ad_id=[AD_ID]&ad_len=[AD_LEN]&ad_mt=[AD_MT]&ad_sys=[AD_SYS]&ad_v=[AD_V]&blocking_error=[BLOCKING_ERROR]&error_msg=[ERROR_MSG]&ima_error=[IMA_ERROR]&internal_id=[INTERNAL_ID]&error_code=[YT_ERROR_CODE]&aqi=]]></Error><Creatives><Creative><Linear><TrackingEvents><Tracking event=\"skip\"><![CDATA[https://www.youtube.com/api/stats/ads?ver=2&ns=1&event=7&device=1&content_v=FzU-czBuDbo&el=detailpage&ei=-VwkWbbxGuSq4AK4lK3oBg&devicever=1.20170522&format=[FORMAT_NAMESPACE]_[FORMAT_TYPE]_[FORMAT_SUBTYPE]&break_type=[BREAK_TYPE]&conn=[CONN]&cpn=[CPN]&lact=[LACT]&m_pos=[MIDROLL_POS]&mt=[MT]&p_h=[P_H]&p_w=[P_W]&rwt=[RWT]&sdkv=[SDKV]&slot_pos=[SLOT_POS]&vis=[VIS]&vol=[VOL]&wt=[WT]&ad_cpn=[AD_CPN]&ad_id=[AD_ID]&ad_len=[AD_LEN]&ad_mt=[AD_MT]&ad_sys=[AD_SYS]&ad_v=[AD_V]&i_x=[I_X]&i_y=[I_Y]&aqi=]]></Tracking><Tracking event=\"complete\"><![CDATA[https://www.youtube.com/api/stats/ads?ver=2&ns=1&event=3&device=1&content_v=FzU-czBuDbo&el=detailpage&ei=-VwkWbbxGuSq4AK4lK3oBg&devicever=1.20170522&format=[FORMAT_NAMESPACE]_[FORMAT_TYPE]_[FORMAT_SUBTYPE]&break_type=[BREAK_TYPE]&conn=[CONN]&cpn=[CPN]&lact=[LACT]&m_pos=[MIDROLL_POS]&mt=[MT]&p_h=[P_H]&p_w=[P_W]&rwt=[RWT]&sdkv=[SDKV]&slot_pos=[SLOT_POS]&vis=[VIS]&vol=[VOL]&wt=[WT]&ad_cpn=[AD_CPN]&ad_id=[AD_ID]&ad_len=[AD_LEN]&ad_mt=[AD_MT]&ad_sys=[AD_SYS]&ad_v=[AD_V]&aqi=]]></Tracking><Tracking event=\"progress\" offset=\"00:00:30.000\"><![CDATA[https://www.youtube.com/api/stats/ads?ver=2&ns=1&event=8&device=1&content_v=FzU-czBuDbo&el=detailpage&ei=-VwkWbbxGuSq4AK4lK3oBg&devicever=1.20170522&format=[FORMAT_NAMESPACE]_[FORMAT_TYPE]_[FORMAT_SUBTYPE]&break_type=[BREAK_TYPE]&conn=[CONN]&cpn=[CPN]&lact=[LACT]&m_pos=[MIDROLL_POS]&mt=[MT]&p_h=[P_H]&p_w=[P_W]&rwt=[RWT]&sdkv=[SDKV]&slot_pos=[SLOT_POS]&vis=[VIS]&vol=[VOL]&wt=[WT]&ad_cpn=[AD_CPN]&ad_id=[AD_ID]&ad_len=[AD_LEN]&ad_mt=[AD_MT]&ad_sys=[AD_SYS]&ad_v=[AD_V]&aqi=]]></Tracking></TrackingEvents><VideoClicks><ClickTracking><![CDATA[https://www.youtube.com/api/stats/ads?ver=2&ns=1&event=6&device=1&content_v=FzU-czBuDbo&el=detailpage&ei=-VwkWbbxGuSq4AK4lK3oBg&devicever=1.20170522&format=[FORMAT_NAMESPACE]_[FORMAT_TYPE]_[FORMAT_SUBTYPE]&break_type=[BREAK_TYPE]&conn=[CONN]&cpn=[CPN]&lact=[LACT]&m_pos=[MIDROLL_POS]&mt=[MT]&p_h=[P_H]&p_w=[P_W]&rwt=[RWT]&sdkv=[SDKV]&slot_pos=[SLOT_POS]&vis=[VIS]&vol=[VOL]&wt=[WT]&ad_cpn=[AD_CPN]&ad_id=[AD_ID]&ad_len=[AD_LEN]&ad_mt=[AD_MT]&ad_sys=[AD_SYS]&ad_v=[AD_V]&i_x=[I_X]&i_y=[I_Y]&aqi=]]></ClickTracking></VideoClicks></Linear></Creative></Creatives><Extensions><Extension type=\"waterfall\" fallback_index=\"2\"/><Extension type=\"activeview\"><CustomTracking><Tracking event=\"viewable_impression\"><![CDATA[https://www.youtube.com/api/stats/ads?ver=2&ns=1&event=11&device=1&content_v=FzU-czBuDbo&el=detailpage&ei=-VwkWbbxGuSq4AK4lK3oBg&devicever=1.20170522&format=[FORMAT_NAMESPACE]_[FORMAT_TYPE]_[FORMAT_SUBTYPE]&break_type=[BREAK_TYPE]&conn=[CONN]&cpn=[CPN]&lact=[LACT]&m_pos=[MIDROLL_POS]&mt=[MT]&p_h=[P_H]&p_w=[P_W]&rwt=[RWT]&sdkv=[SDKV]&slot_pos=[SLOT_POS]&vis=[VIS]&vol=[VOL]&wt=[WT]&ad_cpn=[AD_CPN]&ad_id=[AD_ID]&ad_len=[AD_LEN]&ad_mt=[AD_MT]&ad_sys=[AD_SYS]&ad_v=[AD_V]&aqi=]]></Tracking></CustomTracking></Extension></Extensions></Wrapper></Ad></VAST></vmap:VASTData></vmap:AdSource><vmap:TrackingEvents><vmap:Tracking event=\"error\"><![CDATA[https://www.youtube.com/api/stats/ads?ver=2&ns=1&event=1&device=1&content_v=FzU-czBuDbo&el=detailpage&ei=-VwkWbbxGuSq4AK4lK3oBg&devicever=1.20170522&break_type=[BREAK_TYPE]&conn=[CONN]&cpn=[CPN]&lact=[LACT]&m_pos=[MIDROLL_POS]&mt=[MT]&p_h=[P_H]&p_w=[P_W]&rwt=[RWT]&sdkv=[SDKV]&slot_pos=[SLOT_POS]&vis=[VIS]&vol=[VOL]&wt=[WT]]]></vmap:Tracking></vmap:TrackingEvents><vmap:Extensions><vmap:Extension type=\"YouTube\"><yt:BreakProperty break_type=\"BREAK_TYPE_PRE_ROLL\"/></vmap:Extension></vmap:Extensions></vmap:AdBreak><vmap:Extensions><vmap:Extension type=\"YouTube\"><TrackingDecoration match=\"^https?://((([a-z][a-z0-9.-]*\\.)?(youtube|corp\\.google).com/api/stats/ads)|((www\\.)?youtube\\.com/pagead/psul))\" headers=\"device,user\"/><TrackingMacro match=\"^https?://(secure\\-uat\\-dpr\\.imrworldwide|secure\\-gg\\.imrworldwide|g\\.scorecardresearch)\\.com/\" macros=\"device_id\"/><RegexUriMacroValidator><MacroToRegexUris macro=\"NIELSEN_DEVICE_ID\"><RegexUri value=\"^https?://(secure\\-uat\\-dpr\\.imrworldwide|secure\\-gg\\.imrworldwide|g\\.scorecardresearch)\\.com/\"/></MacroToRegexUris><MacroToRegexUris macro=\"COMSCORE_DEVICE_ID\"><RegexUri value=\"^https?://(secure\\-uat\\-dpr\\.imrworldwide|secure\\-gg\\.imrworldwide|g\\.scorecardresearch)\\.com/\"/></MacroToRegexUris><MacroToRegexUris macro=\"MOAT_INIT\"><RegexUri value=\"^https?://yts\\.moatads\\.com\"/><RegexUri value=\"^https?://yts-testing\\.moatads\\.com\"/><RegexUri value=\"^https?://pagead2\\.googlesyndication\\.com/pagead/gen_204\"/></MacroToRegexUris><MacroToRegexUris macro=\"MOAT_VIEWABILITY\"><RegexUri value=\"^https?://[^.]*\\.moatads\\.com\"/><RegexUri value=\"^https?://pagead2\\.googlesyndication\\.com/pagead/gen_204\"/><RegexUri value=\"^https?://pubads\\.g\\.doubleclick\\.net\"/></MacroToRegexUris><MacroToRegexUris macro=\"IAS_VIEWABILITY\"><RegexUri value=\"^https?://pm\\.adsafeprotected\\.com/youtube\"/><RegexUri value=\"^https?://pm\\.test-adsafeprotected\\.com/youtube\"/><RegexUri value=\"^https?://pagead2\\.googlesyndication\\.com/pagead/gen_204\"/><RegexUri value=\"^https?://pubads\\.g\\.doubleclick\\.net\"/></MacroToRegexUris><MacroToRegexUris macro=\"DV_VIEWABILITY\"><RegexUri value=\"^https?://e[0-9]+\\.yt\\.srs\\.doubleverify\\.com\"/><RegexUri value=\"^https?://pagead2\\.googlesyndication\\.com/pagead/gen_204\"/><RegexUri value=\"^https?://pubads\\.g\\.doubleclick\\.net\"/></MacroToRegexUris><MacroToRegexUris macro=\"GOOGLE_VIEWABILITY\"><RegexUri value=\"^https?://pagead2\\.googlesyndication\\.com\"/><RegexUri value=\"^https?://pubads\\.g\\.doubleclick\\.net\"/><RegexUri value=\"^https?://googleads\\.g\\.doubleclick\\.net\"/><RegexUri value=\"^https?://([a-z0-9]+\\.)*youtube\\.com\"/><RegexUri value=\"^https?://ad[\\.-]([a-z0-9]+\\.){0,1}doubleclick\\.net\"/><RegexUri value=\"^https?://ade\\.googlesyndication\\.com\"/></MacroToRegexUris></RegexUriMacroValidator></vmap:Extension></vmap:Extensions></vmap:VMAP>","watch_xlb":"https://s.ytimg.com/yts/xlbbin/watch-strings-zh_CN-vflEAPML4.xlb","watermark":",https://s.ytimg.com/yts/img/watermark/youtube_watermark-vflHX6b6E.png,https://s.ytimg.com/yts/img/watermark/youtube_hd_watermark-vflAzLcD6.png","xhr_apiary_host":"youtubei.youtube.com"},"assets":{"css":"/yts/cssbin/player-vflYlrrxe/www-player.css","js":"/yts/jsbin/player-vfld8zR1S/zh_CN/base.js"},"attrs":{"id":"movie_player"},"html5":true,"messages":{"player_fallback":["必须使用 Adobe Flash Player 或支持 HTML5 的浏览器播放视频。<a href=\"https://get.adobe.com/flashplayer/\">下载最新版 Flash Player</a> <a href=\"/html5\">详细了解如何升级至 HTML5 浏览器</a>"]},"min_version":"8.0.0","params":{"allowfullscreen":"true","allowscriptaccess":"always","bgcolor":"#000000"},"sts":17305,"url":"https://s.ytimg.com/yts/swfbin/player-vflUTzNYD/watch_as3.swf","url_v8":"https://s.ytimg.com/yts/swfbin/player-vflUTzNYD/cps.swf","url_v9as2":""}
     */
    public static JSONObject getVideoJsonFromUrl(Page page){
        String html =page.getHtml();
        html = html.substring(html.indexOf("ytplayer.config = ")+18,html.indexOf(";ytplayer.load"));
        return JSON.parseObject(html);
    }

    /**
     * 从page里获取到有效的视频下载信息
     * @param json
     * @return
     */
    public static List<YoutubeVideoQuality> getVideoUrlsFromPage( JSONObject json){
        //播放地址
        String videoUrls = (String)json.getJSONObject("args").get("url_encoded_fmt_stream_map");
        List<YoutubeVideoQuality> urlResult = getQualityResult(videoUrls);
        //下载地址
        String fmts = (String)json.getJSONObject("args").get("adaptive_fmts");
        List<YoutubeVideoQuality> urlResult2 = getQualityResult(fmts);
        urlResult2.addAll(urlResult);
        return urlResult2;
    }

    /**
     * 从youtubeURL集合中提取有效信息
     * @param videoUrls
     * @return
     */
    public static List<YoutubeVideoQuality> getQualityResult(String videoUrls){
        List<YoutubeVideoQuality> urlResult = new ArrayList<YoutubeVideoQuality>(); //结果集
        String videos[] = videoUrls.split(",");
        for(String video:videos){
            YoutubeVideoQuality youtubeVideoQuality = new YoutubeVideoQuality();
            //获取type，url。sin等类型
            String itags[] = video.split("&");
            for(String itag : itags){
                String nameValue[] = itag.split("=");
//                if(nameValue[0].equals("signature")){
//                    youtubeVideoQuality.setSignature(URLEncodeDecode.decode(nameValue[1]));
//                }
                if(nameValue[0].equals("url")){
                    youtubeVideoQuality.setUrl(URLEncodeDecode.decode(nameValue[1]));
                }
                if(nameValue[0].equals("itag")){
                    youtubeVideoQuality.setItag(Integer.valueOf(nameValue[1]));
                    youtubeVideoQuality.setQuality(YoutubeItagToQuality.getResolutionByItag(youtubeVideoQuality.getItag()));
                    youtubeVideoQuality.setType(YoutubeItagToQuality.getTypeByItag(youtubeVideoQuality.getItag()));
                }
            }
            if(youtubeVideoQuality.getQuality()!=null){
                log.info("success ~ "+youtubeVideoQuality.getType()+":"+youtubeVideoQuality.getQuality()+":"+youtubeVideoQuality.getUrl());
                urlResult.add(youtubeVideoQuality);
            }
        }
        return urlResult;
    }
}
